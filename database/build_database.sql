PRAGMA foreign_keys = ON;

CREATE TABLE ENTRY_TYPE 
( 
 id NUMBER(16) PRIMARY KEY,  
 name VARCHAR(256) NOT NULL  
); 

CREATE TABLE VALUE_TYPE 
( 
 id NUMBER(16) PRIMARY KEY,  
 name VARCHAR(256) NOT NULL  
); 

CREATE TABLE CREDIT_CARD_FLAG 
( 
 id NUMBER(16) PRIMARY KEY,  
 name VARCHAR(256) NOT NULL
); 

CREATE TABLE FINANCIAL_ENTRY_CATEGORY 
( 
 id NUMBER(16) PRIMARY KEY,  
 name VARCHAR(256) NOT NULL,  
 entry_type_id NUMBER(16) NOT NULL,
 FOREIGN KEY (entry_type_id) REFERENCES ENTRY_TYPE(id)  
); 

CREATE TABLE CREDIT_CARD 
( 
 id NUMBER(16) PRIMARY KEY,  
 name VARCHAR(256) NOT NULL,  
 number NUMBER(16) NOT NULL,  
 valid_month_date NUMBER(2) NOT NULL,  
 valid_year_date NUMBER(4) NOT NULL,  
 credit_card_flag_id NUMBER(16) NOT NULL,
 FOREIGN KEY(credit_card_flag_id) REFERENCES CREDIT_CARD_FLAG(id)
); 

CREATE TABLE FINANCIAL_ENTRY 
( 
 id NUMBER(16) PRIMARY KEY,  
 name VARCHAR(256) NOT NULL,
 entry_type_id NUMBER(16) NOT NULL,  
 recurrent NUMBER(1) NOT NULL,  
 start_date DATE NOT NULL,  
 finish_date DATE,  
 value NUMBER(16,4),  
 financial_entry_category_id NUMBER(16) NOT NULL,  
 value_type_id NUMBER(16) NOT NULL,
 credit_card_id NUMBER(16),
 FOREIGN KEY(entry_type_id) REFERENCES ENTRY_TYPE(id),
 FOREIGN KEY(financial_entry_category_id) REFERENCES FINANCIAL_ENTRY_CATEGORY(id),
 FOREIGN KEY(value_type_id) REFERENCES VALUE_TYPE(id),
 FOREIGN KEY(credit_card_number) REFERENCES CREDIT_CARD(number)
); 

CREATE TABLE FINANCIAL_CONTROL 
( 
 month NUMBER(2) NOT NULL,  
 year NUMBER(4) NOT NULL,  
 description VARCHAR(4000),  
 status VARCHAR(256) NOT NULL,
 PRIMARY KEY (month,year)
); 

CREATE TABLE FINANCIAL_CONTROL_ENTRY 
( 
 financial_control_month NUMBER(2) NOT NULL,  
 financial_control_year NUMBER(4) NOT NULL,  
 financial_entry_id NUMBER(16) NOT NULL,
 value NUMBER(16,4),
 entry_date DATE,
 FOREIGN KEY(financial_control_month) REFERENCES FINANCIAL_CONTROL(month),
 FOREIGN KEY(financial_control_year) REFERENCES FINANCIAL_CONTROL(year),
 FOREIGN KEY(financial_entry_id) REFERENCES FINANCIAL_ENTRY(id)
); 

INSERT INTO ENTRY_TYPE (id, name) VALUES (1,'RECEITA');
INSERT INTO ENTRY_TYPE (id, name) VALUES (2,'DESPESA');
INSERT INTO ENTRY_TYPE (id, name) VALUES (3,'RESERVA');

INSERT INTO FINANCIAL_ENTRY_CATEGORY(id, name, entry_type_id) VALUES (1,'SALÁRIO',1);
INSERT INTO FINANCIAL_ENTRY_CATEGORY(id, name, entry_type_id) VALUES (2,'HORAS EXTRAS',1);
INSERT INTO FINANCIAL_ENTRY_CATEGORY(id, name, entry_type_id) VALUES (3,'FREELANCE',1);
INSERT INTO FINANCIAL_ENTRY_CATEGORY(id, name, entry_type_id) VALUES (4,'CARTÃO DE CRÉDITO',2);
INSERT INTO FINANCIAL_ENTRY_CATEGORY(id, name, entry_type_id) VALUES (5,'DESPESAS GERAIS',2);
INSERT INTO FINANCIAL_ENTRY_CATEGORY(id, name, entry_type_id) VALUES (6,'SAÚDE',2);
INSERT INTO FINANCIAL_ENTRY_CATEGORY(id, name, entry_type_id) VALUES (7,'FARMACIA',2);
INSERT INTO FINANCIAL_ENTRY_CATEGORY(id, name, entry_type_id) VALUES (8,'CUIDADOS PESSOAIS',2);
INSERT INTO FINANCIAL_ENTRY_CATEGORY(id, name, entry_type_id) VALUES (9,'AUTOMÓVEIS',2);
INSERT INTO FINANCIAL_ENTRY_CATEGORY(id, name, entry_type_id) VALUES (10,'POUPANÇA',3);
INSERT INTO FINANCIAL_ENTRY_CATEGORY(id, name, entry_type_id) VALUES (11,'INVESTIMENTOS',3);
INSERT INTO FINANCIAL_ENTRY_CATEGORY(id, name, entry_type_id) VALUES (12,'QUITAÇÃO DE DIVIDAS',3);

INSERT INTO VALUE_TYPE (id, name) VALUES (1,'FIXO');
INSERT INTO VALUE_TYPE (id, name) VALUES (2,'VARIAVEL');

INSERT INTO CREDIT_CARD_FLAG(id, name) VALUES (1,'VISA');
INSERT INTO CREDIT_CARD_FLAG(id, name) VALUES (2,'MASTERCARD');
INSERT INTO CREDIT_CARD_FLAG(id, name) VALUES (3,'AMERICAN EXPRESS');